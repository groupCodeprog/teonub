function generaImagen(){html2canvas(document.querySelector("#conf")).then(t=>{document.querySelector("#canvaReport").appendChild(t),$("#canvaReport").find("img").eq(0).attr("class","img-responsive"),$("#canvaReport").find("img").eq(0).attr("class","img-fluid");document.querySelector("canvas").toDataURL("image/jpeg",1);let e=t.toDataURL("image/jpeg",1),a=new jsPDF("","pt","a4"),o=a.internal.pageSize.getWidth(),n=a.internal.pageSize.getHeight();a.addImage(e,"JPEG",0,0,o,n);let l=$(".txtdate").val()+$(".txttotal").val()+$(".text-hora").val()+".pdf";a.save(l||"docu.pdf")})}var myModal=new bootstrap.Modal(document.getElementById("modal"));function setFecha(){fecha=new Date($(".txtdate").val()+"T00:00:00"),$(".fecha-text").eq(0).html($("<strong>",{text:primeraLetraMayuscula(fecha.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}))}function cargarDatos(){let t=$(".txtotros").eq(0).val().replace(/\r?\n/g,"<br />");$(".txthora").eq(0).html($("<strong>",{text:$(".text-hora").val()+" AM"})),setFecha(),$(".lblcita").find("strong").text($(".txtcita").eq(0).val()),$(".lblcompartido").find("em").text('"'+$(".txttipo").eq(0).val()+'"'),$(".lblestado").find("strong").text($(".txtestado").eq(0).val()),$(".lblclientes").find("strong").text($(".txtnombre").eq(0).val()),$(".lblotros").html(t),$(".lbltotal").find("strong").text("Total: "+getMoneda(parseFloat($(".txttotal").eq(0).val()))+" MXN"),$(".lblabono").find("strong").text("Anticipo: "+getMoneda(parseFloat($(".txtabonado").eq(0).val()))+" MXN"),$(".lblresta").find("strong").text("Resta: "+getMoneda(parseFloat(calculaPago()))+" MXN"),generaImagen()}function calculaPago(){return parseFloat($(".txttotal").eq(0).val())-parseFloat($(".txtabonado").eq(0).val())}myModal.show(),$(".lbl-pagado").hide(),$(".btn-genera").click((function(t){t.preventDefault(),$("#canvaReport").html(""),cargarDatos()})),$(".txtabonado").eq(0).keyup((function(t){t.preventDefault(),$(".txtresta").eq(0).val(calculaPago())})),$(".txtestado").eq(0).keyup((function(t){t.preventDefault(),"pendiente"==$(this).val()?($(".lbl-pagado").hide(),$(".lblabono").show(),$(".lblresta").show()):($(".lblabono").hide(),$(".lblresta").hide(),$(".lbl-pagado").show())}));const primeraLetraMayuscula=t=>{const e=t.charAt(0).toUpperCase(),a=t.substring(1,t.length);return e.concat(a)};function getMoneda(t){var e=t;return Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e)}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("sw.js").then(t=>{console.log("Service worker registered.",t)})});